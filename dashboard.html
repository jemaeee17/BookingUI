<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Assafbook Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            margin-bottom: 2rem;
        }

        .hotel-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
        }

        .carousel img {
            width: 100%;
            height: 400px;
            object-fit: cover;
        }

        @media (max-width: 576px) {
        .carousel img {
            height: 200px; 
        }
    }
    </style>
</head>

<body>

    <!-- Carousel -->
    <div id="hotelCarousel" class="carousel slide mb-5" data-bs-ride="carousel" data-bs-interval="2000">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="./images/ArtStudio.jpg" class="d-block w-100" alt="Hotel 1">
            </div>
            <div class="carousel-item">
                <img src="./images/bg-image-1.jpg" class="d-block w-100" alt="Hotel 2">
            </div>
            <div class="carousel-item">
                <img src="./images/bg-image-2.jpg" class="d-block w-100" alt="Hotel 3">
            </div>
            <div class="carousel-item">
                <img src="./images/bg-image-3.png" class="d-block w-100" alt="Hotel 4">
            </div>
            <div class="carousel-item">
                <img src="./images/bg-image-4.jpg" class="d-block w-100" alt="Hotel 5">
            </div>
            <div class="carousel-item">
                <img src="./images/Drawing&Sculpture.jpg" class="d-block w-100" alt="Hotel 6">
            </div>
            <div class="carousel-item">
                <img src="./images/game_pad.jpg" class="d-block w-100" alt="Hotel 7">
            </div>
            <div class="carousel-item">
                <img src="./images/gym_capsule.jpg" class="d-block w-100" alt="Hotel 8">
            </div>
            <div class="carousel-item">
                <img src="./images/Museum.jpg" class="d-block w-100" alt="Museum">
            </div>
            <div class="carousel-item">
                <img src="./images/StreetShow.jpg" class="d-block w-100" alt="Street Show">
            </div>
            <div class="carousel-item">
                <img src="./images/Theater_shows.png" class="d-block w-100" alt="Theater Show">
            </div>
            <div class="carousel-item">
                <img src="./images/Cultural_activities.jpg" class="d-block w-100" alt="Cultural Activities">
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#hotelCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#hotelCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
        </button>
    </div>

    <!-- Search Bar -->
    <div class="container mb-4">
        <input type="text" id="searchInput" class="form-control" placeholder="Search capsules or events...">
    </div>

    <!-- Cards -->
    <div class="container">
        <div class="row row-cols-1 row-cols-md-3 g-4">
            
            <div class="col">
                <div class="card hotel-card">
                    <img src="./images/bg-image-1.jpg" alt="Capsule 1">
                    <div class="card-body text-center">
                        <h5 class="card-title">Capsule 1</h5>
                        <button class="btn btn-primary" onclick="showLocationModal('Capsule 1')">Book Now</button>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card hotel-card">
                    <img src="./images/bg-image-2.jpg" alt="Capsule 2">
                    <div class="card-body text-center">
                        <h5 class="card-title">Capsule 2</h5>
                        <button class="btn btn-primary" onclick="showLocationModal('Capsule 2')">Book Now</button>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card hotel-card">
                    <img src="./images/bg-image-3.png" alt="Capsule 3">
                    <div class="card-body text-center">
                        <h5 class="card-title">Capsule 3</h5>
                        <button class="btn btn-primary" onclick="showLocationModal('Capsule 3')">Book Now</button>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card hotel-card">
                    <img src="./images/bg-image-4.jpg" alt="Capsule 4">
                    <div class="card-body text-center">
                        <h5 class="card-title">Capsule 4</h5>
                        <button class="btn btn-primary" onclick="showLocationModal('Capsule 4')">Book Now</button>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card hotel-card">
                    <img src="./images/ArtStudio.jpg" alt="Art Studio Capsule">
                    <div class="card-body text-center">
                        <h5 class="card-title">Art Studio Capsule</h5>
                        <button class="btn btn-primary" onclick="showLocationModal('Art Studio Capsule')">Book Now</button>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card hotel-card">
                    <img src="./images/Drawing&Sculpture.jpg" alt="Drawing & Sculpture Capsule">
                    <div class="card-body text-center">
                        <h5 class="card-title">Drawing & Sculpture Capsule</h5>
                        <button class="btn btn-primary" onclick="showLocationModal('Drawing & Sculpture Capsule')">Book Now</button>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card hotel-card">
                    <img src="./images/game_pad.jpg" alt="Game Pad Capsule">
                    <div class="card-body text-center">
                        <h5 class="card-title">Game Pad Capsule</h5>
                        <button class="btn btn-primary" onclick="showLocationModal('Game Pad Capsule')">Book Now</button>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card hotel-card">
                    <img src="./images/gym_capsule.jpg" alt="Gym Capsule">
                    <div class="card-body text-center">
                        <h5 class="card-title">Gym Capsule</h5>
                        <button class="btn btn-primary" onclick="showLocationModal('Gym Capsule')">Book Now</button>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card hotel-card">
                    <img src="./images/Museum.jpg" alt="Museum">
                    <div class="card-body text-center">
                        <h5 class="card-title">Museum</h5>
                        <button class="btn btn-primary" onclick="showLocationModal('Museum')">Book Now</button>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card hotel-card">
                    <img src="./images/StreetShow.jpg" alt="Street Show">
                    <div class="card-body text-center">
                        <h5 class="card-title">Street Show</h5>
                        <button class="btn btn-primary" onclick="showLocationModal('Street Show')">Book Now</button>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card hotel-card">
                    <img src="./images/Theater_shows.png" alt="Theater Shows">
                    <div class="card-body text-center">
                        <h5 class="card-title">Theater Shows</h5>
                        <button class="btn btn-primary" onclick="showLocationModal('Theater Shows')">Book Now</button>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card hotel-card">
                    <img src="./images/Cultural_activities.jpg" alt="Cultural Activities">
                    <div class="card-body text-center">
                        <h5 class="card-title">Cultural Activities</h5>
                        <button class="btn btn-primary" onclick="showLocationModal('Cultural Activities')">Book Now</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Location Permission Modal -->
    <div class="modal fade" id="permissionModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-0 shadow-lg">
                <div class="modal-body text-center p-4">
                    <h5 class="mb-3">Allow Location Access</h5>
                    <p class="text-muted">We need your permission to access your location to suggest the best available
                        branches.</p>
                    <div class="d-flex justify-content-center gap-3">
                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Deny</button>
                        <button type="button" class="btn btn-primary" onclick="proceedAfterPermission()">Allow</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Schedule Selection Modal -->
    <div class="modal fade" id="locationModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-0 shadow-lg overflow-hidden">
                <img src="./images/Dubai-Static-img.jpg" alt="Map" style="width:100%; height:200px; object-fit:cover;">
                <div class="modal-body text-center p-4">
                    <h5 class="mb-3" id="modalTitle">Select Schedule</h5>
                    <p class="text-muted">Choose your preferred day, time, and location</p>
                    <select id="daySelect" class="form-select mb-2">
                        <option>Monday</option>
                        <option>Tuesday</option>
                        <option>Wednesday</option>
                    </select>
                    <select id="timeSelect" class="form-select mb-2">
                        <option>09:00 AM</option>
                        <option>01:00 PM</option>
                        <option>05:00 PM</option>
                    </select>
                    <select id="locationSelect" class="form-select mb-4">
                        <option>Dubai Main Branch</option>
                        <option>Marina Station</option>
                        <option>Expo Zone</option>
                    </select>
                    <div class="d-flex justify-content-center gap-3">
                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button class="btn btn-primary" onclick="proceedToBooking()">Continue</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        let selectedHotelId = null;
        let selectedHotelImage = null;

        function showLocationModal(hotelId) {
            selectedHotelId = hotelId;

            const cards = document.querySelectorAll('.hotel-card');
            cards.forEach(card => {
                const title = card.querySelector('.card-title').innerText.trim();
                if (title === hotelId) {
                    const img = card.querySelector('img');
                    selectedHotelImage = img.getAttribute('src').split('/').pop();
                }
            });

            const permissionModal = new bootstrap.Modal(document.getElementById('permissionModal'));
            permissionModal.show();
        }

        function proceedAfterPermission() {
            bootstrap.Modal.getInstance(document.getElementById('permissionModal')).hide();

            document.getElementById('modalTitle').innerText = selectedHotelId;
            const scheduleModal = new bootstrap.Modal(document.getElementById('locationModal'));
            scheduleModal.show();
        }

        function proceedToBooking() {
            const selectedDay = document.getElementById('daySelect').value;
            const selectedTime = document.getElementById('timeSelect').value;
            const selectedLocation = document.getElementById('locationSelect').value;

            const time24 = convertTo24Hour(selectedTime);
            const dateForDay = getNextDateForDay(selectedDay);

            const bookingUrl = `booking.html?hotel=${encodeURIComponent(selectedHotelId)}&img=${encodeURIComponent(selectedHotelImage)}&day=${encodeURIComponent(selectedDay)}&time=${encodeURIComponent(time24)}&location=${encodeURIComponent(selectedLocation)}&date=${dateForDay}`;
            window.location.href = bookingUrl;
        }

        function convertTo24Hour(time12h) {
            const [time, modifier] = time12h.split(' ');
            let [hours, minutes] = time.split(':');
            if (modifier === 'PM' && hours !== '12') hours = parseInt(hours, 10) + 12;
            if (modifier === 'AM' && hours === '12') hours = '00';
            return `${hours.toString().padStart(2, '0')}:${minutes}`;
        }

        function getNextDateForDay(dayName) {
            const daysOfWeek = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
            const targetDayIndex = daysOfWeek.indexOf(dayName);
            if (targetDayIndex === -1) return null;
            const today = new Date();
            const todayIndex = today.getDay();
            let diff = targetDayIndex - todayIndex;
            if (diff < 0) diff += 7;
            const nextDate = new Date();
            nextDate.setDate(today.getDate() + diff);
            return nextDate.toISOString().split('T')[0];
        }

        document.getElementById('searchInput').addEventListener('input', function () {
            const query = this.value.toLowerCase();
            document.querySelectorAll('.hotel-card').forEach(card => {
                const title = card.querySelector('.card-title').innerText.toLowerCase();
                card.parentElement.style.display = title.includes(query) ? 'block' : 'none';
            });
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>